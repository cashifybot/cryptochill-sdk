import t from"axios";import*as i from"crypto";import{Base64 as e}from"js-base64";function o(t,i){t.prototype=Object.create(i.prototype),t.prototype.constructor=t,r(t,i)}function r(t,i){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,i){return t.__proto__=i,t},r(t,i)}var n=/*#__PURE__*/function(){function o(t){this.apiKey=void 0,this.apiUrl=void 0,this.profileId=void 0,this.apiSecret=void 0,this.callbackToken=void 0,this.apiKey=t.apiKey,this.apiUrl=t.apiUrl?t.apiUrl:"https://api.cryptochill.com",this.profileId=t.profileId,this.apiSecret=t.apiSecret,this.callbackToken=t.callbackToken}var r=o.prototype;return r.encodeHmac=function(t,e){return i.createHmac("sha256",t).update(e).digest("hex")},r.cryptochillApiRequest=function(i,o,r){void 0===r&&(r="GET");var n="/v1/"+i+"/";o.request=n,o.nonce=(new Date).getTime();var c=JSON.stringify(o),p=e.encode(c),s=this.encodeHmac(this.apiSecret,p);return t({method:r,url:this.apiUrl+n,headers:{"X-CC-KEY":this.apiKey,"X-CC-PAYLOAD":p,"X-CC-SIGNATURE":s}})},o}(),c=/*#__PURE__*/function(t){function i(){return t.apply(this,arguments)||this}return o(i,t),i.prototype.getAccount=function(){return this.cryptochillApiRequest("account/settings/")},i}(n),p="invoices",s=/*#__PURE__*/function(t){function i(){return t.apply(this,arguments)||this}o(i,t);var e=i.prototype;return e.listInvoices=function(t){return this.cryptochillApiRequest(p)},e.getInvoice=function(t){return this.cryptochillApiRequest(p+"/"+t)},e.createInvoice=function(t){return this.cryptochillApiRequest(p,t,"POST")},i}(n),a=function(t){this.account=void 0,this.invoices=void 0,this.account=new c(t),this.invoices=new s(t)};export{a as Cryptochill};
